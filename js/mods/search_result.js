!function(t){({config:{minScore:1e-5,minNum:3},init:function(){this.$wrap=t("#J_searchResultWrap"),this.$contaner=t("#J_searchResult"),this.$tips=t("#J_searchResultTips"),this.$loading=t("#J_searchResultLoading"),this.tpl=Hogan.compile(t("#J_postTpl").html()),this.tipsTpl=Hogan.compile(t("#J_searchResultTipsTpl").html()),this.queryString=Util.getParam("query"),this.queryString&&this.getData()},getData:function(){var i=this;this.$loading.addClass("active"),t.ajax({url:"/assets/lunr/all.json",dataType:"json"}).done(function(t){i.initSearch(t)})},initSearch:function(t){this.index=lunr.Index.load(t.index),this.sourceData=t.store,this.result=this.index.search(this.queryString),this.filteredData=this.filterSourceData(),this.render()},render:function(){var t,i=this.filteredData;t=i.length?this.tpl.render({data:this.filteredData,coversrc:function(){return this.cover}}):"抱歉，您要的内容似乎没有哦，不如换个关键字试试吧。",this.$contaner.append(t),this.$tips.append(this.tipsTpl.render({query:this.queryString,count:i.length})),this.$loading.removeClass("active"),this.$wrap.show()},filterSourceData:function(){var e=this,s=[];e.config.minNum;return this.result.forEach(function(t,i){e.config.minScore>t.score&&i>=e.config.minScore.minNum||s.push(e.sourceData[t.ref])}),s}}).init()}(jQuery);